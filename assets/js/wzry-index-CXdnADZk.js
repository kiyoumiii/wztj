import{l as _e,r as m,c as x,w as W,y as le,x as ce,E as u,F as R,O as D,Q as L,M as v,I as i,L as z,G as ue,H as de,u as t,J as Ee,S as K,T as h,U as P,N as Oe,P as X,X as pe,n as F}from"./wzry-wzry_vue-BxQEaZ6z.js";import{u as Te,s as me}from"./wzry-wzry_vuePlugin-CVcqpH4P.js";import{Y as Re,A as ve,a8 as Se,aC as Ne,F as J,G as S,m as Q,r as fe,aP as Ie,y as Le,ad as ye,k as Ae,b4 as Ce,b5 as ke,b6 as He,j as y,ai as A,b7 as q,$ as B,M as G,b8 as Z,b3 as xe,aj as n,p as De}from"./wzry-index-Uq5ghgDZ.js";import{u as Ke,a as he}from"./wzry-useDialogSwitch-CZV3M_xU.js";import{d as ee}from"./wzry-wzry_dayjs-RHYc_Oz-.js";import"./wzry-wzry_axios-C_xhNtcK.js";import"./wzry-wzry_lodash-BosuxZz1.js";import"./wzry-wzry_pinyin_pro-CKM55ih0.js";import"./wzry-wzry_i18n-DZ3KhxG4.js";import"./wzry-wzry_vueuse-CaHOeI9T.js";const Pe={key:0,class:"article-list"},Be=["onClick"],Ge=["src"],Ye=["data-text"],Ue={key:0,class:"article-detail"},be={class:"name"},we={class:"have"},Me={class:"num"},ge={class:"desc"},$e=_e({name:"Knapsack",__name:"index",setup(Ve){var V,j;const te=Te(),d=Re(),_=ve(),ae=Se(),{knapsack:l}=me(d),{playAudio:E}=Ae(),c=m(),N=m(),r=m((V=l.value[0])==null?void 0:V[0]),C=m((j=l.value[0])==null?void 0:j[0]),k=m({left:0,top:0}),{enableRadialBorder:Y,disableRadialBorder:U}=Ke(N),b=x(()=>l.value.findIndex(e=>e[0]===r.value)),w=x(()=>{var e;return(e=l.value[b.value])==null?void 0:e[1]}),M=x(()=>l.value.length===0),g=e=>{r.value=e,$(),c.value.style.transform="scale(0.75)",c.value.style.opacity="0.5",setTimeout(()=>{c.value.style.transform="scale(1)",c.value.style.opacity="1"},250),F(()=>{C.value=e,E("n4r4")})},se=e=>{const s={HERO_DEBRIS:n.HERO_DEBRIS,SKIN_DEBRIS:n.SKIN_DEBRIS,KING_CRYSTAL:n.KING_CRYSTAL,HONOR_CRYSTAL:n.HONOR_CRYSTAL,HERO_LOTTERY_STONE:n.HERO_LOTTERY,SKIN_LOTTERY_STONE:n.SKIN_LOTTERY,HERO_LOTTERY_COIN:n.HERO_LOTTERY,SKIN_LOTTERY_COIN:n.SKIN_LOTTERY,GUESS_COIN:n.YI_BAO,JUMP_COIN:n.YI_BAO};if(Object.keys(s).includes(e)){te.push(s[e]);return}const a={HERO_CHEST_OPTIONAL:"HERO",SKIN_CARD_INITIAL:"INITIAL",SKIN_CHEST_BRAVE_OPTIONAL:"BRAVE",SKIN_CHEST_EPIC_OPTIONAL:"EPIC",SKIN_CHEST_LEGEND_OPTIONAL:"LEGEND",SKIN_CHEST_LIMIT_OPTIONAL:"LIMIT"};if(Object.keys(a).includes(e)){Ce(a[e]);return}if(["HERO_EXP_ONE","HERO_EXP_TWO"].includes(e)){ke(e);return}if(["BLESSING_BAG","HERO_CHEST_RANDOM","HERO_TREASURE","SKIN_BRAVE_TREASURE","SKIN_EPIC_TREASURE","SKIN_LEGEND_TREASURE","SKIN_LIMIT_TREASURE"].includes(e)){He(e);return}if(["HERO_LOTTERY_WEEK","SKIN_LOTTERY_WEEK"].includes(e)){const o=e==="HERO_LOTTERY_WEEK"?"HERO":"SKIN",T=o==="HERO"?"英雄夺宝石周卡":"皮肤夺宝石周卡",O=o==="HERO"?"HERO_LOTTERY_STONE":"SKIN_LOTTERY_STONE",H=o==="HERO"?"HERO_LOTTERY_COIN":"SKIN_LOTTERY_COIN",I=o==="HERO"?"heroLotteryStoneWeekCardExpireTime":"skinLotteryStoneWeekCardExpireTime",re=o==="HERO"?"英雄夺宝石周卡奖励发放":"皮肤夺宝石周卡奖励发放";if(_.user_data[I]!==0){y({text:A("jt83",{v:T}),confirm(){const ie=_.user_data[I];_.updateUserData({[I]:q(ie+6048e5)}),d.setGamePropNum(e,1,"SUB"),E("wm14"),B(G.ep96)}});return}y({text:A("m2x2",{v:T}),confirm(){_.updateUserData({[I]:q(ee().valueOf()+6048e5)}),d.setGamePropNum(e,1,"SUB"),E("wm14"),B(G.fo08),ae.sendGiftMail({title:re,desc:"别忘了明天0点之前也来领取哦！",props:[{key:O,num:Z[o].STONE},{key:H,num:Z[o].COIN}]})}});return}if(["DOUBLE_GOLD","DOUBLE_EXP"].includes(e)){const o=e==="DOUBLE_GOLD"?"GOLD":"EXP",T=o==="GOLD"?"双倍金币卡":"双倍经验卡",O=o==="GOLD"?"doubleGoldCardExpireTime":"doubleExpCardExpireTime";if(_.user_data[O]!==0){y({text:A("jt83",{v:T}),confirm(){const H=_.user_data[O];_.updateUserData({[O]:H+864e5}),d.setGamePropNum(e,1,"SUB"),E("wm14"),B(G.fo08)}});return}y({text:A("m2x2",{v:T}),confirm(){_.updateUserData({[O]:ee().valueOf()+864e5}),d.setGamePropNum(e,1,"SUB"),E("wm14")}});return}e==="GUESS_CARD"&&he().setActivityShow(!0)},$=()=>{F(()=>{var p;const e=b.value;if(e===-1||!((p=N.value)!=null&&p.length)){c.value&&(c.value.style.opacity="0");return}const s=N.value[e],a=xe(s,"article");c.value.style.opacity="1",k.value={left:a.offsetLeft,top:a.offsetTop}})},f=Ne($,500);return W(w,()=>{d.articles[r.value]===0&&g(l.value[0][0])}),W(()=>l.value.length,f),le(()=>{window.addEventListener("resize",f),f(),E("fz02")}),ce(()=>{window.removeEventListener("resize",f)}),(e,s)=>(u(),R("div",{class:"knapsack",onMouseenter:s[1]||(s[1]=(...a)=>t(Y)&&t(Y)(...a)),onMouseleave:s[2]||(s[2]=(...a)=>t(U)&&t(U)(...a))},[D(P,{name:"to-right-opacity",appear:""},{default:L(()=>[M.value?h("",!0):v((u(),R("div",Pe,[i("div",{ref_key:"shineRoundRef",ref:c,class:"shine-round",style:z({left:k.value.left+"px",top:k.value.top+"px"})},null,4),(u(!0),R(ue,null,de(t(l),(a,p)=>v((u(),R("div",{key:p,ref_for:!0,ref_key:"articleRefs",ref:N,class:Ee(["article",{active:r.value===a[0]}]),onClick:oe=>g(a[0])},[i("img",{src:t(J)(t(S).ICON[a[0]]),alt:""},null,8,Ge),i("div",{class:"num","data-text":a[1]},K(a[1]),9,Ye)],10,Be)),[[t(Q),{text:t(S).NAME[a[0]]}]])),128))])),[[t(fe)]])]),_:1}),D(P,{name:"to-top-opacity",appear:""},{default:L(()=>[r.value?(u(),R("div",Ue,[D(P,{name:"fade"},{default:L(()=>[v(i("div",{class:"icon",style:z({backgroundImage:`url(${t(J)(t(S).ICON[C.value])})`})},null,4),[[Oe,C.value===r.value]])]),_:1}),i("div",be,K(t(S).NAME[r.value]),1),i("div",we,[s[3]||(s[3]=i("div",{class:"text"},"拥有",-1)),v(i("div",Me,null,512),[[t(Ie),{num:w.value,once:!1}]])]),i("div",ge,K(t(S).DESC[r.value]),1),v((u(),X(t(Le),{type:"warning",class:"k-button",onClick:s[0]||(s[0]=a=>se(r.value))},{default:L(()=>s[4]||(s[4]=[pe(" 使用 ")])),_:1})),[[t(Q)]])])):h("",!0)]),_:1}),M.value?(u(),X(t(ye),{key:0,tip:"背包居然是空的！"})):h("",!0)],32))}}),st=De($e,[["__scopeId","data-v-62a48e64"]]);export{st as default};
