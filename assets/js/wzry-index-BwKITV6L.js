import{l as M,r as j,c as q,E as o,F as i,G as f,H as K,J,S as C,T as Q,I as e,u as t,M as k,P as N,Q as r,L as P,y as W,O as u,U as E}from"./wzry-wzry_vue-BxQEaZ6z.js";import{u as X,L as Z,S as tt}from"./wzry-useLotteryPlay-muCM-Nhq.js";import{s as st}from"./wzry-wzry_vuePlugin-CVcqpH4P.js";import{bj as et,a2 as at,F as v,G as c,bk as $,m as S,n as b,y as x,x as ot,k as D,p as Y}from"./wzry-index-Uq5ghgDZ.js";import"./wzry-index-BCpGPkY1.js";import"./wzry-index-cZRh2pAA.js";import"./wzry-index-DsYqfsh8.js";import"./wzry-wzry_axios-C_xhNtcK.js";import"./wzry-wzry_dayjs-RHYc_Oz-.js";import"./wzry-wzry_lodash-BosuxZz1.js";import"./wzry-wzry_pinyin_pro-CKM55ih0.js";import"./wzry-wzry_i18n-DZ3KhxG4.js";import"./wzry-wzry_vueuse-CaHOeI9T.js";const lt={class:"lottery-area"},it={key:0,class:"tag"},nt=["src"],rt={class:"text"},dt={class:"tool"},ut={class:"content"},ct={class:"luck"},_t={class:"luck-value"},pt=["data-text"],vt={class:"btns"},mt=["src"],yt=["src"],ft=["src"],kt=["src"],Nt=M({__name:"index",setup(z){const d=et(),A=at(),{skin_lucky:m}=st(d),{playAudio:w}=D(),{getLotteryIndex:R,gift_index:_,last_reward_position:B,checkAloneNotCount:F,setLastPosition:V,have_alone_free:y,have_multiple_free:I,have_alone_discount:T,have_multiple_discount:g,calcAloneReward:G,calcMultipleReward:U,checkMultipleNotCount:H}=X("SKIN"),l=j(-1),L=q(()=>A.config.lotteryAnimation),O=()=>{if(F())return;R();let n=0,s=0;const a=()=>{setTimeout(()=>{if(w("o7r6"),l.value++,l.value===12&&(l.value=0),l.value===B.value&&n++,n===2&&(s+=35),n===2&&_.value===l.value){setTimeout(()=>{V(_.value),d.setLuckValue("SKIN"),G()},250);return}a()},50+[0,25,50,75][n]+s)};a()},h=n=>{if(H(n,O))return;const s=[],a=()=>{setTimeout(async()=>{if(l.value++,L.value&&w("o7r6"),l.value===12&&(l.value=0),_.value===l.value&&s.length<5&&(d.setLuckValue("SKIN"),$.SKIN[_.value].type==="HONOR_CRYSTAL"&&d.resetSkinLuck(),s.push(_.value),await ot(L.value?500:0,R),s.length>=5)){U(s);return}a()},L.value?50:0)};a()};return(n,s)=>(o(),i("div",lt,[(o(!0),i(f,null,K(t($).SKIN,(a,p)=>(o(),i("div",{key:p,class:J([{active:l.value===p},"area-box"])},[a.num?(o(),i("div",it,C(a.num),1)):Q("",!0),e("img",{src:t(v)(t(c).ICON[a.type]),alt:"",class:"icon"},null,8,nt),e("div",rt,C(t(c).NAME[a.type]),1)],2))),128)),e("div",dt,[e("div",ut,[e("div",ct,[e("div",_t,[e("div",{class:"value","data-text":t(m)},C(t(m)),9,pt)]),s[2]||(s[2]=e("div",{class:"luck-label","data-text":"幸运值"},"幸运值",-1))]),e("div",vt,[t(y)?(o(),i(f,{key:0},[k((o(),N(t(x),{disabled:!t(y),class:"k-button",type:"warning",onClick:O},{default:r(()=>[e("img",{src:t(v)(t(c).ICON.SKIN_LOTTERY_COIN),alt:"",class:"icon"},null,8,mt),s[3]||(s[3]=e("span",{class:"num"},"×1",-1)),s[4]||(s[4]=e("div",{class:"text"},"夺宝一次",-1))]),_:1},8,["disabled"])),[[t(S),{disabled:!t(y),text:t(y)?"":t(b).zk84}]]),k((o(),N(t(x),{disabled:!t(I),class:"k-button",type:"warning",onClick:s[0]||(s[0]=a=>h("FREE"))},{default:r(()=>[e("img",{src:t(v)(t(c).ICON.SKIN_LOTTERY_COIN),alt:"",class:"icon"},null,8,yt),s[5]||(s[5]=e("span",{class:"num"},"×5",-1)),s[6]||(s[6]=e("div",{class:"text"},"夺宝五次",-1))]),_:1},8,["disabled"])),[[t(S),{disabled:!t(I),text:t(I)?"":t(b).c2y9}]])],64)):(o(),i(f,{key:1},[k((o(),N(t(x),{class:"k-button",type:"warning",disabled:!t(T),onClick:O},{default:r(()=>[e("img",{src:t(v)(t(c).ICON.SKIN_LOTTERY_STONE),alt:"",class:"icon"},null,8,ft),s[7]||(s[7]=e("span",{class:"num"},"×1",-1)),s[8]||(s[8]=e("div",{class:"text"},"夺宝一次",-1))]),_:1},8,["disabled"])),[[t(S),{disabled:!t(T),text:t(T)?"":t(b).zk84}]]),k((o(),N(t(x),{disabled:!t(g),class:"k-button",type:"warning",onClick:s[1]||(s[1]=a=>h("DEDUCTION"))},{default:r(()=>[e("img",{src:t(v)(t(c).ICON.SKIN_LOTTERY_STONE),alt:"",class:"icon"},null,8,kt),s[9]||(s[9]=e("span",{class:"num"},"×5",-1)),s[10]||(s[10]=e("div",{class:"text"},"夺宝五次",-1))]),_:1},8,["disabled"])),[[t(S),{disabled:!t(g),text:t(g)?"":t(b).c2y9}]])],64))])]),e("div",{class:"waves",style:P(`--height:${t(m)/2}%`)},[(o(),i(f,null,K(50,(a,p)=>e("div",{key:p,style:P({animationDelay:p*.05+"s"}),class:"wave"},null,4)),64))],4)])]))}}),St=Y(Nt,[["__scopeId","data-v-db7ef141"]]),bt={class:"seize-treasures"},xt={class:"main"},It=M({name:"LotterySkin",__name:"index",setup(z){const{playAudio:d}=D();return W(()=>{d("bq69")}),(A,m)=>(o(),i("div",bt,[u(E,{name:"to-bottom",appear:""},{default:r(()=>[u(Z,{type:"SKIN"})]),_:1}),e("div",xt,[u(E,{name:"to-right-opacity",appear:""},{default:r(()=>[u(St)]),_:1}),u(E,{name:"to-left-opacity",appear:""},{default:r(()=>[u(tt,{type:"SKIN"})]),_:1})])]))}}),Mt=Y(It,[["__scopeId","data-v-9d094be3"]]);export{Mt as default};
